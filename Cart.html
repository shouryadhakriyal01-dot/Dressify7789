<!DOCTYPE html>
<html>
<head>
    <title>Your Cart</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

<!-- HEADER -->
<header>
    <h1>Your Cart</h1>
    <nav>
        <a href="index.html">Home</a>
        <a href="order-history.html">My Orders</a>
    </nav>
</header>

<!-- CART SECTION -->
<section class="products">
    <h2>Cart Items</h2>

    <!-- CART ITEMS YAHAN DIKHENGE -->
    <div id="cart-items"></div>

    <!-- TOTAL -->
    <h3 id="total"></h3>

    <!-- PAYMENT BUTTONS -->
    <h3>Select Payment Method</h3>
    <button onclick="payUPI()">Pay via UPI</button>
    <button onclick="payCOD()">Cash on Delivery</button>

    <!-- WHATSAPP ORDER -->
    <button onclick="orderWhatsApp()">Order on WhatsApp</button>
</section>

<!-- âœ… JAVASCRIPT FILE / CODE HAMESHA BODY KE END ME -->
<script src="script.js"></script>
<script>
    // ðŸ‘‡ ORDER + CART JAVASCRIPT YAHAN PASTE KARNA HAI

    let cart = JSON.parse(localStorage.getItem("cart")) || [];
    let container = document.getElementById("cart-items");
    let total = 0;

    cart.forEach((item, index) => {
        total += item.price;
        container.innerHTML += `
            <div class="product">
                <h3>${item.name}</h3>
                <p>â‚¹${item.price}</p>
                <button onclick="removeItem(${index})">Remove</button>
            </div>
        `;
    });

    document.getElementById("total").innerText = "Total: â‚¹" + total;

    function removeItem(index) {
        cart.splice(index, 1);
        localStorage.setItem("cart", JSON.stringify(cart));
        location.reload();
    }

    // ðŸ” SAVE ORDER FUNCTION
    function saveOrder(paymentMode) {
        let orders = JSON.parse(localStorage.getItem("orders")) || [];

        let order = {
            items: cart,
            total: total,
            payment: paymentMode,
            date: new Date().toLocaleString()
        };

        orders.push(order);
        localStorage.setItem("orders", JSON.stringify(orders));
        localStorage.removeItem("cart");
    }

    // ðŸ’³ PAYMENT FUNCTIONS
    function payUPI() {
        saveOrder("UPI Payment");
        alert("Order placed via UPI ðŸŽ‰");
        window.location.href = "order-history.html";
    }

    function payCOD() {
        saveOrder("Cash on Delivery");
        alert("Order placed (COD) ðŸŽ‰");
        window.location.href = "order-history.html";
    }

    // ðŸ“² WHATSAPP ORDER
    function orderWhatsApp() {
        let msg = "ðŸ›ï¸ New Order%0A";
        cart.forEach(item => {
            msg += `${item.name} - â‚¹${item.price}%0A`;
        });
        msg += `%0ATotal: â‚¹${total}`;

        let phone = "917906429886"; // apna number
        window.open(`https://wa.me/${phone}?text=${msg}`, "_blank");
    }
</script>

</body>
</html>